(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{10:function(e,t,n){e.exports={form:"TaskForm_form__1wAfM"}},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r=n(7),c=n.n(r),a=(n(19),n(4)),s=n(1),o=n.n(s),i=n(2),u=n(3),d=function(){var e=Object(s.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(null),o=Object(a.a)(c,2),d=o[0],l=o[1],f=Object(s.useCallback)(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var c,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),l(null),e.prev=2,e.next=5,fetch(t.url,{method:t.method?t.method:"get",body:t.body?JSON.stringify(t.body):null,headers:t.headers?t.headers:{}});case 5:if((c=e.sent).ok){e.next=8;break}throw new Error("Request failed!");case 8:return e.next=10,c.json();case 10:a=e.sent,n(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),l(e.t0.message||"Something went wrong!");case 17:r(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[]);return{isLoading:n,error:d,sendRequest:f}},l=n(8),f=n.n(l),j=n(0),b=function(e){return Object(j.jsx)("section",{className:f.a.section,children:e.children})},h=n(5),m=n.n(h),p=function(e){var t=e.id,n=e.onDelete,r=d().sendRequest,c=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({url:"https://add-tasks-4062b-default-rtdb.firebaseio.com/".concat(t,".json"),method:"DELETE"});case 2:n(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("li",{className:m.a.task,children:[e.children,Object(j.jsx)("button",{onClick:c,className:m.a.remove,children:"Delete"})]})},O=n(9),x=n.n(O),v=function(e){var t=e.onDelete,n=Object(j.jsx)("h2",{children:"No tasks found. Start adding some!"});e.items.length>0&&(n=Object(j.jsx)("ul",{children:e.items.map((function(e){return Object(j.jsx)(p,{onDelete:t,id:e.id,children:e.text},e.id)}))}));var r=n;return e.error&&(r=Object(j.jsx)("button",{onClick:e.onFetch,children:"Try again"})),e.loading&&(r="Loading tasks..."),Object(j.jsx)(b,{children:Object(j.jsx)("div",{className:x.a.container,children:r})})},k=n(10),g=n.n(k),_=function(e){var t=Object(s.useRef)();return Object(j.jsxs)("form",{className:g.a.form,onSubmit:function(n){n.preventDefault();var r=t.current.value;r.trim().length>0&&e.onEnterTask(r),t.current.value=""},children:[Object(j.jsx)("input",{type:"text",ref:t}),Object(j.jsx)("button",{children:e.loading?"Sending...":"Add Task"})]})},w=function(e){var t=d(),n=t.isLoading,r=t.error,c=t.sendRequest,a=function(){var t=Object(u.a)(Object(i.a)().mark((function t(n){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c({url:"https://add-tasks-4062b-default-rtdb.firebaseio.com/.json",method:"POST",body:{text:n},headers:{"Content-Type":"application/json"}},(function(t){var r={id:t.name,text:n};e.onAddTask(r)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)(b,{children:[Object(j.jsx)(_,{onEnterTask:a,loading:n}),r&&Object(j.jsx)("p",{children:r})]})};var T=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=d(),i=c.isLoading,u=c.error,l=c.sendRequest;return Object(s.useEffect)((function(){l({url:"https://add-tasks-4062b-default-rtdb.firebaseio.com/.json"},(function(e){var t=[];for(var n in e)t.push({id:n,text:e[n].text});r(t)}))}),[l]),Object(j.jsxs)(o.a.Fragment,{children:[Object(j.jsx)(w,{onAddTask:function(e){r((function(t){return t.concat(e)}))}}),Object(j.jsx)(v,{items:n,loading:i,error:u,onFetch:l,onDelete:function(e){r((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})};c.a.createRoot(document.getElementById("root")).render(Object(j.jsx)(T,{}))},5:function(e,t,n){e.exports={task:"TaskItem_task__39sGU",remove:"TaskItem_remove__2JNgI"}},8:function(e,t,n){e.exports={section:"Section_section__35Ii9"}},9:function(e,t,n){e.exports={container:"Tasks_container__2gv4C"}}},[[21,1,2]]]);
//# sourceMappingURL=main.f09a0b21.chunk.js.map